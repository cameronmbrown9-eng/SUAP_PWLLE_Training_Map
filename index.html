<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUAP Sites with TBD PWLLE Training Dates</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        #map {
            width: 100%;
            height: 600px;
            border: none;
        }
        
        .info-panel {
            padding: 30px;
            background: #f8f9fa;
        }
        
        .site-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .site-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }
        
        .site-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }
        
        .site-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        
        .site-location {
            color: #e74c3c;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .site-details {
            font-size: 0.85em;
            color: #6c757d;
            line-height: 1.4;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
            margin-top: 8px;
            background: #d4edda;
            color: #155724;
        }
        
        .leaflet-popup-content {
            margin: 12px 16px;
            line-height: 1.4;
            min-width: 250px;
        }
        
        .popup-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .popup-details {
            font-size: 0.9em;
            color: #495057;
        }
        
        .popup-contact {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #dee2e6;
            font-size: 0.85em;
        }
        
        .tbd-highlight {
            background: #fff3cd;
            color: #856404;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 SUAP Sites with TBD PWLLE Training</h1>
            <p>Sites requiring PWLLE training date scheduling</p>
        </div>
        
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-number" id="totalSites">10</div>
                <div class="stat-label">Total Sites</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="provinces">5</div>
                <div class="stat-label">Provinces</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="currentSites">10</div>
                <div class="stat-label">Current Sites</div>
            </div>
        </div>
        
        <div id="map"></div>
        
        <div class="info-panel">
            <div class="site-list" id="siteList"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // Sites with TBD in PWLLE training column from the provided data
        const tbdSites = [
            {
                siteCount: 12,
                name: "Ensemble Moncton (Non-Mobile AND Mobile)",
                address: "80 Weldon Street",
                city: "Moncton",
                province: "NB",
                contact: "Scott Phipps, Executive Director - MSc, PhD",
                email: "sphipps@ensemblegm.ca",
                phone: "506-859-9616",
                agreement: "Signed",
                exemption: "Approved, Submitted",
                deviceSerial: "P9E4A2059MFG",
                devices: 2,
                deliveryDate: "7/29/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 46.0878, lng: -64.7782,
                flightTimeFromLondon: "3h 45m (via Halifax or Toronto)",
                flightTimeFromToronto: "2h 30m (via Halifax)",
                flightCostFromLondon: "$500-700 CAD",
                flightCostFromToronto: "$450-650 CAD",
                nearestAirport: "YQM (Greater Moncton Airport)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            },
            {
                siteCount: 13,
                name: "Cochrane District Paramedic Service",
                address: "500 Algonquin Blvd East, Timmins ON, P4N 1B7",
                city: "Timmins",
                province: "ON",
                contact: "Seamus Murphy, Deputy Chief",
                email: "seamus.murphy@cdsb.care",
                phone: "",
                agreement: "Signed",
                exemption: "Approved",
                deviceSerial: "56KBC7GT14FG1",
                devices: 1,
                deliveryDate: "6/23/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 48.4758, lng: -81.3304,
                flightTimeFromLondon: "2h 15m (via Toronto)",
                flightTimeFromToronto: "1h 25m (direct)",
                flightCostFromLondon: "$320-470 CAD",
                flightCostFromToronto: "$280-420 CAD",
                nearestAirport: "YTS (Timmins Airport)",
                driveTimeFromLondon: "7h 30m (730km)",
                gasCostFromLondon: "$95-115 CAD"
            },
            {
                siteCount: 14,
                name: "Renfrew Paramedic Services",
                address: "450 O'Brien Rd, Renfrew, ON K7V 3Z2",
                city: "Renfrew",
                province: "ON",
                contact: "Stephanie Rose, Commander - Community Paramedic Program",
                email: "SRose@countyofrenfrew.on.ca",
                phone: "613-818-9813",
                agreement: "Signed",
                exemption: "Submitted",
                deviceSerial: "Pending Update",
                devices: 1,
                deliveryDate: "7/17/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 45.4736, lng: -76.6869,
                flightTimeFromLondon: "1h 30m (to Ottawa YOW)",
                flightTimeFromToronto: "1h 15m (to Ottawa YOW)",
                flightCostFromLondon: "$250-400 CAD",
                flightCostFromToronto: "$220-350 CAD",
                nearestAirport: "YOW (Ottawa Airport - 1h drive)",
                driveTimeFromLondon: "4h 45m (470km)",
                gasCostFromLondon: "$60-75 CAD"
            },
            {
                siteCount: 15,
                name: "Peterborough AIDS Resource Network",
                address: "60 Hunter St E 2nd Floor",
                city: "Peterborough",
                province: "ON",
                contact: "Dane Record",
                email: "executivedirector@parn.ca",
                phone: "705-559-0656",
                additionalContact: "Aizha - aizha@parn.ca",
                agreement: "Signed",
                exemption: "In Progress",
                deviceSerial: "Pending Update",
                devices: 1,
                deliveryDate: "7/25/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 44.3091, lng: -78.3197,
                flightTimeFromLondon: "1h 15m (to Toronto YYZ)",
                flightTimeFromToronto: "45m (to Toronto YYZ)",
                flightCostFromLondon: "$180-250 CAD",
                flightCostFromToronto: "N/A (ground transport)",
                nearestAirport: "YYZ (Toronto Pearson - 1.5h drive)",
                driveTimeFromLondon: "2h 45m (270km)",
                gasCostFromLondon: "$35-45 CAD"
            },
            {
                siteCount: 16,
                name: "Travailderue",
                address: "221 Rue Tessier",
                city: "Chicoutimi",
                province: "QC",
                contact: "Stéphanie Bouchard",
                email: "stephanie.bouchard@strchic.com",
                phone: "418-545-0999",
                agreement: "Signed",
                exemption: "Approved",
                deviceSerial: "ATPBJ8JJT8FG1",
                devices: 1,
                deliveryDate: "8/26/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 48.4284, lng: -71.0487,
                flightTimeFromLondon: "4h 30m (via Montreal or Quebec City)",
                flightTimeFromToronto: "3h 15m (via Montreal or Quebec City)",
                flightCostFromLondon: "$430-600 CAD",
                flightCostFromToronto: "$380-550 CAD",
                nearestAirport: "YBG (Bagotville Airport - 30min drive)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            },
            {
                siteCount: 17,
                name: "NHC Society",
                address: "76 Esplanade",
                city: "Truro",
                province: "NS",
                contact: "Alana Weatherbee, Program Manager",
                email: "support@nhcsociety.ca",
                phone: "902 895 0931",
                agreement: "Signed",
                exemption: "Submitted",
                deviceSerial: "Pending Update",
                devices: 1,
                deliveryDate: "7/30/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 45.3669, lng: -63.2758,
                flightTimeFromLondon: "3h 15m (via Toronto to Halifax)",
                flightTimeFromToronto: "2h 00m (direct to Halifax)",
                flightCostFromLondon: "$370-530 CAD",
                flightCostFromToronto: "$320-480 CAD",
                nearestAirport: "YHZ (Halifax Airport - 1h drive)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            },
            {
                siteCount: 18,
                name: "Prairie Harm Reduction",
                address: "1516 20th St W",
                city: "Saskatoon",
                province: "SK",
                contact: "Kayla DeMong, Executive Director",
                email: "admin@prairiehr.ca",
                phone: "(306) 242-5005 ext 4",
                agreement: "Signed",
                exemption: "Approved",
                deviceSerial: "C2Q1MR2JT8FG1",
                devices: 1,
                deliveryDate: "8/14/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 52.1332, lng: -106.6700,
                flightTimeFromLondon: "4h 15m (via Calgary or Toronto)",
                flightTimeFromToronto: "3h 00m (via Calgary)",
                flightCostFromLondon: "$470-670 CAD",
                flightCostFromToronto: "$420-620 CAD",
                nearestAirport: "YXE (Saskatoon Airport)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            },
            {
                siteCount: 19,
                name: "Breakaway",
                address: "21 Strickland Ave",
                city: "Toronto",
                province: "ON",
                contact: "Ruben Tarajano",
                email: "Rubent@breakawaycs.ca",
                phone: "",
                agreement: "Signed",
                exemption: "In Progress",
                deviceSerial: "88X7YQ625MFP1",
                devices: 1,
                deliveryDate: "8/21/25",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 43.6532, lng: -79.3832,
                flightTimeFromLondon: "50 minutes (direct)",
                flightTimeFromToronto: "N/A (same city)",
                flightCostFromLondon: "$120-180 CAD",
                flightCostFromToronto: "N/A (local transport)",
                nearestAirport: "YYZ (Toronto Pearson)",
                driveTimeFromLondon: "1h 50m (190km)",
                gasCostFromLondon: "$25-30 CAD"
            },
            {
                siteCount: 20,
                name: "AIDS New Brunswick",
                address: "354 King St",
                city: "Fredericton",
                province: "NB",
                contact: "Linda Thompson - Brown",
                email: "linda@aidsnb.com",
                phone: "506-455-2625",
                agreement: "Signed",
                exemption: "In Progress",
                deviceSerial: "Pending Update",
                devices: 1,
                deliveryDate: "TBD",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 45.9636, lng: -66.6431,
                flightTimeFromLondon: "3h 30m (via Toronto or Halifax)",
                flightTimeFromToronto: "2h 15m (via Halifax)",
                flightCostFromLondon: "$440-630 CAD",
                flightCostFromToronto: "$390-580 CAD",
                nearestAirport: "YFC (Fredericton Airport)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            },
            {
                siteCount: 21,
                name: "Avenue B Harm Reduction Inc.",
                address: "62 Waterloo St",
                city: "Saint John",
                province: "NB",
                contact: "Laura MacNeill",
                email: "laura.macneill@avenueb.ca",
                phone: "(506) 652-2437",
                agreement: "Signed",
                exemption: "Approved",
                deviceSerial: "Pending Update",
                devices: 1,
                deliveryDate: "TBD",
                pwlleDate: "TBD",
                cashContrib: "NA",
                lat: 45.2729, lng: -66.0633,
                flightTimeFromLondon: "3h 45m (via Toronto or Halifax)",
                flightTimeFromToronto: "2h 30m (via Halifax)",
                flightCostFromLondon: "$460-650 CAD",
                flightCostFromToronto: "$410-600 CAD",
                nearestAirport: "YSJ (Saint John Airport)",
                driveTimeFromLondon: "N/A (outside Ontario)",
                gasCostFromLondon: "N/A"
            }
        ];

        // Initialize the map centered on Canada
        const map = L.map('map').setView([50.0, -85.0], 4);

        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Add markers for each site
        tbdSites.forEach((site, index) => {
            const marker = L.circleMarker([site.lat, site.lng], {
                radius: 12,
                fillColor: '#e74c3c',
                color: 'white',
                weight: 3,
                opacity: 1,
                fillOpacity: 0.8
            }).addTo(map);

            // Create popup content
            let popupContent = '<div class="popup-title">' + site.name + '</div>';
            popupContent += '<div class="popup-details">';
            popupContent += '📍 ' + site.address + ', ' + site.city + ', ' + site.province + '<br>';
            popupContent += '✈️ <strong>Flight from London, ON: ' + site.flightTimeFromLondon + '</strong><br>';
            popupContent += '✈️ <strong>Flight from Toronto, ON: ' + site.flightTimeFromToronto + '</strong><br>';
            popupContent += '💰 <strong>Flight Cost from London: ' + site.flightCostFromLondon + '</strong><br>';
            popupContent += '💰 <strong>Flight Cost from Toronto: ' + site.flightCostFromToronto + '</strong><br>';
            
            if (site.province === 'ON') {
                popupContent += '🚗 <strong>Drive from London, ON: ' + site.driveTimeFromLondon + '</strong><br>';
                popupContent += '⛽ <strong>Gas Cost from London: ' + site.gasCostFromLondon + '</strong><br>';
            }
            
            popupContent += '🛩️ Nearest Airport: ' + site.nearestAirport + '<br>';
            popupContent += '📊 Status: CURRENT<br>';
            popupContent += '📋 Agreement: ' + site.agreement + '<br>';
            popupContent += '✅ Exemption: ' + site.exemption + '<br>';
            popupContent += '📱 Devices: ' + site.devices + '<br>';
            popupContent += '📅 Delivery: ' + site.deliveryDate + '<br>';
            popupContent += '🎓 <span class="tbd-highlight">PWLLE: TBD</span>';
            popupContent += '</div>';
            popupContent += '<div class="popup-contact">';
            popupContent += '👤 ' + site.contact + '<br>';
            popupContent += '✉️ ' + site.email + '<br>';
            if (site.phone) {
                popupContent += '📞 ' + site.phone + '<br>';
            }
            popupContent += '</div>';

            marker.bindPopup(popupContent);
        });

        // Populate site list
        const siteList = document.getElementById('siteList');
        tbdSites.forEach((site, index) => {
            const siteCard = document.createElement('div');
            siteCard.className = 'site-card';
            
            let cardHTML = '<div class="site-name">' + site.name + '</div>';
            cardHTML += '<div class="site-location">📍 ' + site.city + ', ' + site.province + '</div>';
            cardHTML += '<div class="site-location">✈️ <strong>From London, ON: ' + site.flightTimeFromLondon + '</strong></div>';
            cardHTML += '<div class="site-location">✈️ <strong>From Toronto, ON: ' + site.flightTimeFromToronto + '</strong></div>';
            cardHTML += '<div class="site-location">💰 <strong>Flight Cost from London: ' + site.flightCostFromLondon + '</strong></div>';
            cardHTML += '<div class="site-location">💰 <strong>Flight Cost from Toronto: ' + site.flightCostFromToronto + '</strong></div>';
            
            if (site.province === 'ON') {
                cardHTML += '<div class="site-location">🚗 <strong>Drive from London, ON: ' + site.driveTimeFromLondon + '</strong></div>';
                cardHTML += '<div class="site-location">⛽ <strong>Gas Cost from London: ' + site.gasCostFromLondon + '</strong></div>';
            }
            
            cardHTML += '<div class="site-details">';
            cardHTML += '<strong>Nearest Airport:</strong> ' + site.nearestAirport + '<br>';
            cardHTML += '<strong>Contact:</strong> ' + site.contact + '<br>';
            cardHTML += '<strong>Email:</strong> ' + site.email + '<br>';
            if (site.phone) {
                cardHTML += '<strong>Phone:</strong> ' + site.phone + '<br>';
            }
            cardHTML += '<strong>Devices:</strong> ' + site.devices + '<br>';
            cardHTML += '<strong>Delivery Date:</strong> ' + site.deliveryDate + '<br>';
            cardHTML += '<strong>PWLLE Training:</strong> <span class="tbd-highlight">TBD</span>';
            cardHTML += '</div>';
            cardHTML += '<span class="status-badge">CURRENT</span>';
            
            siteCard.innerHTML = cardHTML;
            
            // Add click handler to zoom to site
            siteCard.addEventListener('click', () => {
                map.setView([site.lat, site.lng], 12);
                // Find and open the popup for this marker
                map.eachLayer(layer => {
                    if (layer instanceof L.CircleMarker && 
                        Math.abs(layer.getLatLng().lat - site.lat) < 0.001 && 
                        Math.abs(layer.getLatLng().lng - site.lng) < 0.001) {
                        layer.openPopup();
                    }
                });
            });
            
            siteList.appendChild(siteCard);
        });
    </script>
</body>
</html>